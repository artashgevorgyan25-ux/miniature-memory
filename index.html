<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PUMPS AI — Pump To Infinity</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="margin:0; background:black;">

<script>
let player;
let coins = [];
let score = 0;
let scoreText;
let speed = 2;
let pumpMode = false;

const config = {
  type: Phaser.AUTO,
  width: 360,
  height: 640,
  backgroundColor: '#000000',
  scene: {
    preload: preload,
    create: create,
    update: update
  }
};

new Phaser.Game(config);

// ===== ЗАГРУЗКА =====
function preload() {
  this.load.image('player', 'pumps-ai.png');
  this.load.image(
    'coin',
    'https://upload.wikimedia.org/wikipedia/commons/8/8a/Gold_coin_icon.png'
  );
}

// ===== СОЗДАНИЕ =====
function create() {
  // герой
  player = this.add.image(180, 500, 'player');
  player.setScale(0.25);

  // текст счёта
  scoreText = this.add.text(10, 10, 'USDT: 0', {
    font: '20px Arial',
    fill: '#00ff99'
  });

  // управление
  this.input.on('pointermove', pointer => {
    player.x = Phaser.Math.Clamp(pointer.x, 30, 330);
  });

  // PUMP MODE
  this.input.on('pointerdown', () => {
    pumpMode = true;
    speed = 6;
  });

  this.input.on('pointerup', () => {
    pumpMode = false;
    speed = 2;
  });

  // генерация монет
  this.time.addEvent({
    delay: 800,
    loop: true,
    callback: () => {
      const coin = this.add.image(
        Phaser.Math.Between(30, 330),
        -40,
        'coin'
      );
      coin.setScale(0.07);
      coin.speed = Phaser.Math.Between(2, 4);
      coins.push(coin);
    }
  });
}

// ===== ИГРОВОЙ ЦИКЛ =====
function update() {
  // движение вверх
  player.y -= speed;

  // бесконечность
  if (player.y < -60) {
    player.y = 700;
  }

  // монеты
  for (let i = coins.length - 1; i >= 0; i--) {
    const coin = coins[i];
    coin.y += coin.speed + speed;

    // удалить если улетела
    if (coin.y > 700) {
      coin.destroy();
      coins.splice(i, 1);
      continue;
    }

    // столкновение
    if (Phaser.Geom.Intersects.RectangleToRectangle(
      player.getBounds(),
      coin.getBounds()
    )) {
      coin.destroy();
      coins.splice(i, 1);
      score += pumpMode ? 5 : 1;
      scoreText.setText('USDT: ' + score);
    }
  }
}
</script>

</body>
</html>
